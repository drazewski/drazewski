{
    "componentChunkName": "component---src-templates-blog-js",
    "path": "/blog/change-the-domain-name-of-the-Next-and-Wordpress",
    "result": {"data":{"contentfulBlogPosts":{"date":"Nov 30, 2021","title":"How to change the domain name of the Next.js + Wordpress website","content":{"raw":"{\"nodeType\":\"document\",\"data\":{},\"content\":[{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Domain change - preparation\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"\\nFirst of all, before the domain change operation, I thought carefully about what actions to take, step by step, to make everything go smoothly. In my case, I had to make a few changes. The first and most important step was to link the new domain to the current website that I run on \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Vercel\",\"marks\":[],\"data\":{}}],\"data\":{\"uri\":\"https://vercel.com\"}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Vercel - add new domain\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Although you can purchase a domain with Vercel this time I have decided to add my domains purchased outside of Vercel to my current project.\\nIn the Domains section, I chose the add option. Then I selected my project and then entered my new domain name. My new domain has now appeared in the Domains section.\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"The whole procedure of adding a domain in Vercel is great described in technical documentation: \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"content\":[{\"nodeType\":\"text\",\"value\":\"https://vercel.com/docs/concepts/projects/custom-domains\",\"marks\":[],\"data\":{}}],\"data\":{\"uri\":\"https://vercel.com/docs/concepts/projects/custom-domains\"}},{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Due to the fact that my domain was purchased outside of Vercel I had to configure DNS settings at my domain provider pointing to Vercel's DNS (ns1.vercel-dns.com, ns2.vercel-dns.com)\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"DNS propagation sometimes takes 24 hours or more, but in my case I was lucky because I noticed the changes after less than an hour. In the meantime, I took up the next steps.\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Backend - change of domain for Wordpress\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"As I mentioned before, the website uses the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Wordpress\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" backend. As the instance of Wordpress available at the url: \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"panel.\",\"marks\":[{\"type\":\"italic\"},{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"mynewdomain.pl\",\"marks\":[{\"type\":\"italic\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"  (of course this domain is completely different :) ) is located at the same hosting provider with which I have my domain registered, so now I had to add a redirect from Vercel. In the DNS Records section in the domain settings on Vercel, I had to add an A record named \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"panel \",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"(an extension in front of my regular domain) and the IP address of the server on which Wordpress is placed.\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"embedded-asset-block\",\"content\":[],\"data\":{\"target\":{\"sys\":{\"id\":\"2Ppl2qpfC6Xjwb6khBSqf0\",\"type\":\"Link\",\"linkType\":\"Asset\"}}}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"In Wordpress itself, I also had to make two changes. The first change was to set new values for WP_HOME and WP_SITEURL. The easiest way to do this is in the wp-config.php file:\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"embedded-asset-block\",\"content\":[],\"data\":{\"target\":{\"sys\":{\"id\":\"3OdWqVJQmXrBDrTSHaCQhj\",\"type\":\"Link\",\"linkType\":\"Asset\"}}}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"\\nWhen I was able to log into the WP admin panel, I made one more global change of all entries in the database. All phrases containing the old domain name I replaced with new one. For this purpose, I used a great plugin: \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Better Search Replace\",\"marks\":[],\"data\":{}}],\"data\":{\"uri\":\"https://pl.wordpress.org/plugins/better-search-replace/\"}},{\"nodeType\":\"text\",\"value\":\".\\n\\n\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Code changes\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"While DNS propagation continued, I took care of the last major change, and actually a number of minor changes to the application code itself. It often happens that somewhere in the code we have hardcoded URL values. So I had to review all the code for the presence of the old domain and replace it with the new one. It seems obvious, but it is worth remembering. After all these changes, the new version of the website was deployed.\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"301 redirect for old domain\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"After completing this work, and finishing drinking coffee, I noticed that my website is finally displayed under the new domain. Everything went smoothly and works as it should. But there is still â€¦ the old domain. I didn't want to delete it right away due to its presence in Google. If I removed the old domain, my website under the new domain would have to be indexed again, which of course I did not want, because in fact, entries from Google accounted for over 90% of all visits. So I had to add a redirection from the old domain to the new one - \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"redirect 301 Moved Permanently\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". This redirection we can set in the settings of the old domain in Vercel.\\n\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"embedded-asset-block\",\"content\":[],\"data\":{\"target\":{\"sys\":{\"id\":\"2TzbW15Cagmng4rABAayr1\",\"type\":\"Link\",\"linkType\":\"Asset\"}}}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"heading-2\",\"content\":[{\"nodeType\":\"text\",\"value\":\"Search Console - change for Google\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"The last change did not affect the website itself and its proper working, so I did not have to do it right away, but I wanted the new domain to replace the old domain in Google search results as soon as possible. For this, I had to go to the Search Console panel and add a new domain there. After adding domain, I chose \\\"Change of Address\\\" in the old domain settings and then indicated the new address. After confirming that I am the owner of the new domain, the domain change process for the pages indexed by Google has started. The process is quite slow, however, and currently, three weeks after the domain change, only 30% of indexed url addresses have changed the domain.\",\"marks\":[],\"data\":{}}],\"data\":{}},{\"nodeType\":\"embedded-asset-block\",\"content\":[],\"data\":{\"target\":{\"sys\":{\"id\":\"5XvcpkFpzbT77lqRttrTRH\",\"type\":\"Link\",\"linkType\":\"Asset\"}}}},{\"nodeType\":\"paragraph\",\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}],\"data\":{}}]}","references":[{"contentful_id":"2Ppl2qpfC6Xjwb6khBSqf0","__typename":"ContentfulAsset","id":"d7ecc79a-81a3-57f9-a922-e36a560345d3"},{"contentful_id":"3OdWqVJQmXrBDrTSHaCQhj","__typename":"ContentfulAsset","id":"67a411a8-5556-514f-aa6d-73e234f0e4b2"},{"contentful_id":"2TzbW15Cagmng4rABAayr1","__typename":"ContentfulAsset","id":"6daebd0f-eb88-52a6-9ba8-e50a64508911"},{"contentful_id":"5XvcpkFpzbT77lqRttrTRH","__typename":"ContentfulAsset","id":"d7ffbd50-4a89-554a-83c5-867379db6a86"}]},"featuredImage":{"fluid":{"srcSet":"//images.ctfassets.net/r1q8fbx9u30m/1PuzEe19M9uUyf2aFm9qMJ/404fa7596d8c70fe58d46393c49c7d0b/animal-g5d0e1ff46_1280.jpg?w=200&h=133&q=50 200w,\n//images.ctfassets.net/r1q8fbx9u30m/1PuzEe19M9uUyf2aFm9qMJ/404fa7596d8c70fe58d46393c49c7d0b/animal-g5d0e1ff46_1280.jpg?w=400&h=267&q=50 400w,\n//images.ctfassets.net/r1q8fbx9u30m/1PuzEe19M9uUyf2aFm9qMJ/404fa7596d8c70fe58d46393c49c7d0b/animal-g5d0e1ff46_1280.jpg?w=800&h=533&q=50 800w,\n//images.ctfassets.net/r1q8fbx9u30m/1PuzEe19M9uUyf2aFm9qMJ/404fa7596d8c70fe58d46393c49c7d0b/animal-g5d0e1ff46_1280.jpg?w=1200&h=800&q=50 1200w,\n//images.ctfassets.net/r1q8fbx9u30m/1PuzEe19M9uUyf2aFm9qMJ/404fa7596d8c70fe58d46393c49c7d0b/animal-g5d0e1ff46_1280.jpg?w=1280&h=853&q=50 1280w"}}}},"pageContext":{"slug":"change-the-domain-name-of-the-Next-and-Wordpress"}},
    "staticQueryHashes": ["2236985993","2543130515","63159454"]}